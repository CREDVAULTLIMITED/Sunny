{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["file:///C:/projects/Cred%20Vault/Sunny/apps/institutions-portal/src/components/providers/ThemeProvider.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { createContext, useContext, useEffect, useState, useCallback } from 'react';\r\n\r\n// Theme configuration specific to institutions portal\r\nconst lightTheme = {\r\n  colors: {\r\n    background: {\r\n      primary: 'rgb(255, 255, 255)',\r\n      secondary: 'rgb(248, 250, 252)',\r\n      tertiary: 'rgb(241, 245, 249)'\r\n    },\r\n    text: {\r\n      primary: 'rgb(15, 23, 42)',\r\n      secondary: 'rgb(51, 65, 85)',\r\n      tertiary: 'rgb(100, 116, 139)'\r\n    },\r\n    border: {\r\n      primary: 'rgb(226, 232, 240)',\r\n      secondary: 'rgb(203, 213, 225)'\r\n    },\r\n    accent: {\r\n      primary: 'rgb(34, 197, 94)',\r\n      secondary: 'rgb(16, 185, 129)',\r\n      tertiary: 'rgb(5, 150, 105)'\r\n    }\r\n  }\r\n};\r\n\r\nconst darkTheme = {\r\n  colors: {\r\n    background: {\r\n      primary: 'rgb(15, 23, 42)',\r\n      secondary: 'rgb(30, 41, 59)',\r\n      tertiary: 'rgb(51, 65, 85)'\r\n    },\r\n    text: {\r\n      primary: 'rgb(248, 250, 252)',\r\n      secondary: 'rgb(226, 232, 240)',\r\n      tertiary: 'rgb(148, 163, 184)'\r\n    },\r\n    border: {\r\n      primary: 'rgb(51, 65, 85)',\r\n      secondary: 'rgb(71, 85, 105)'\r\n    },\r\n    accent: {\r\n      primary: 'rgb(34, 197, 94)',\r\n      secondary: 'rgb(16, 185, 129)',\r\n      tertiary: 'rgb(5, 150, 105)'\r\n    }\r\n  }\r\n};\r\n\r\ntype Theme = 'light' | 'dark' | 'system';\r\n\r\ninterface ThemeContextType {\r\n  theme: Theme;\r\n  actualTheme: 'light' | 'dark';\r\n  setTheme: (theme: Theme) => void;\r\n  toggleTheme: () => void;\r\n}\r\n\r\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\r\n\r\ninterface ClientThemeProviderProps {\r\n  children: React.ReactNode;\r\n  defaultTheme?: Theme;\r\n  enableSystem?: boolean;\r\n  attribute?: string;\r\n  storageKey?: string;\r\n  disableTransitionOnChange?: boolean;\r\n}\r\n\r\nexport function ClientThemeProvider({\r\n  children,\r\n  defaultTheme = \"system\",\r\n  enableSystem = true,\r\n  attribute = \"class\",\r\n  storageKey = \"sunny-institution-theme\",\r\n  disableTransitionOnChange = false,\r\n}: ClientThemeProviderProps) {\r\n  const [theme, setThemeState] = useState<Theme>(defaultTheme);\r\n  const [actualTheme, setActualTheme] = useState<'light' | 'dark'>('light');\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  // Get system preference\r\n  const getSystemTheme = useCallback((): 'light' | 'dark' => {\r\n    if (typeof window === 'undefined') return 'light';\r\n    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n  }, []);\r\n\r\n  // Apply theme to document\r\n  const applyTheme = useCallback((newTheme: 'light' | 'dark') => {\r\n    if (typeof window === 'undefined') return;\r\n    \r\n    const root = window.document.documentElement;\r\n    \r\n    if (!disableTransitionOnChange) {\r\n      root.classList.add('theme-transition');\r\n      setTimeout(() => root.classList.remove('theme-transition'), 150);\r\n    }\r\n\r\n    root.classList.remove('light', 'dark');\r\n    root.classList.add(newTheme);\r\n    \r\n    if (attribute === 'class') {\r\n      root.classList.add(newTheme);\r\n    } else if (attribute) {\r\n      root.setAttribute(attribute, newTheme);\r\n    }\r\n    \r\n    setActualTheme(newTheme);\r\n  }, [attribute, disableTransitionOnChange]);\r\n\r\n  // Set theme with persistence\r\n  const setTheme = useCallback((newTheme: Theme) => {\r\n    setThemeState(newTheme);\r\n    \r\n    if (typeof window !== 'undefined') {\r\n      try {\r\n        localStorage.setItem(storageKey, newTheme);\r\n      } catch (e) {\r\n        console.warn('Failed to save theme to localStorage:', e);\r\n      }\r\n    }\r\n\r\n    const resolvedTheme = newTheme === 'system' ? getSystemTheme() : newTheme;\r\n    applyTheme(resolvedTheme);\r\n  }, [applyTheme, getSystemTheme, storageKey]);\r\n\r\n  // Toggle between light and dark (skips system)\r\n  const toggleTheme = useCallback(() => {\r\n    const newTheme = actualTheme === 'light' ? 'dark' : 'light';\r\n    setTheme(newTheme);\r\n  }, [actualTheme, setTheme]);\r\n\r\n  // Initialize theme on mount\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    let initialTheme = defaultTheme;\r\n\r\n    // Try to get saved theme from localStorage\r\n    try {\r\n      const savedTheme = localStorage.getItem(storageKey) as Theme;\r\n      if (savedTheme && ['light', 'dark', 'system'].includes(savedTheme)) {\r\n        initialTheme = savedTheme;\r\n      }\r\n    } catch (e) {\r\n      console.warn('Failed to read theme from localStorage:', e);\r\n    }\r\n\r\n    setThemeState(initialTheme);\r\n    const resolvedTheme = initialTheme === 'system' ? getSystemTheme() : initialTheme;\r\n    applyTheme(resolvedTheme);\r\n    setMounted(true);\r\n  }, [defaultTheme, storageKey, getSystemTheme, applyTheme]);\r\n\r\n  // Listen for system theme changes\r\n  useEffect(() => {\r\n    if (!enableSystem || theme !== 'system') return;\r\n\r\n    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n    const handleChange = () => {\r\n      if (theme === 'system') {\r\n        applyTheme(getSystemTheme());\r\n      }\r\n    };\r\n\r\n    mediaQuery.addEventListener('change', handleChange);\r\n    return () => mediaQuery.removeEventListener('change', handleChange);\r\n  }, [theme, enableSystem, applyTheme, getSystemTheme]);\r\n\r\n  // Don't render until mounted to avoid hydration issues\r\n  if (!mounted) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  return (\r\n    <ThemeContext.Provider\r\n      value={{\r\n        theme,\r\n        actualTheme,\r\n        setTheme,\r\n        toggleTheme,\r\n      }}\r\n    >\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useTheme = () => {\r\n  const context = useContext(ThemeContext);\r\n  if (context === undefined) {\r\n    // Return a safe fallback instead of throwing an error\r\n    return {\r\n      theme: 'light' as const,\r\n      actualTheme: 'light' as const,\r\n      setTheme: () => {},\r\n      toggleTheme: () => {},\r\n    };\r\n  }\r\n  return context;\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}}]
}