# 🏛️ Sunny Institutional Dashboard - Complete Architecture Guide\n\n## 📋 **Table of Contents**\n\n- [Overview](#overview)\n- [Institution Types](#institution-types)\n- [Authentication & Access Control](#authentication--access-control)\n- [Dashboard Structure](#dashboard-structure)\n- [Core Pages & Sections](#core-pages--sections)\n- [Design Guidelines](#design-guidelines)\n- [Components Library](#components-library)\n- [Data Models](#data-models)\n- [API Integration](#api-integration)\n- [Security Considerations](#security-considerations)\n\n---\n\n## 🎯 **Overview**\n\n### **Mission Statement**\nThe Sunny Institutional Dashboard serves as the central command center for banks, SACCOs, MFIs, and other financial institutions to manage their white-label payment solutions, monitor transactions, ensure compliance, and scale their digital financial services.\n\n### **Key Objectives**\n- **Operational Excellence**: Streamline payment operations and transaction management\n- **Regulatory Compliance**: Automate CBK, KRA, and international compliance requirements\n- **Business Intelligence**: Provide actionable insights through advanced analytics\n- **Risk Management**: Real-time fraud detection and risk assessment tools\n- **White-label Solutions**: Enable institutions to brand and customize payment experiences\n- **Scalability**: Support institutions from small SACCOs to major banks\n\n### **Target Domains**\n- **Production**: `institutions.sunnypayments.com`\n- **Staging**: `staging-institutions.sunnypayments.com`\n- **Development**: `localhost:3003`\n\n---\n\n## 🏦 **Institution Types**\n\n### **Primary Institution Categories**\n\n#### **1. Commercial Banks**\n- Traditional banking institutions\n- **Special Features**: RTGS integration, correspondent banking, forex management\n- **Compliance Requirements**: CBK Tier 1 regulations, Basel III compliance\n- **Transaction Limits**: Unlimited transaction processing\n- **Custom Features**: White-label mobile banking, corporate payment gateways\n\n#### **2. SACCOs (Savings and Credit Cooperatives)**\n- Member-owned financial cooperatives\n- **Special Features**: Member management, dividend calculations, loan processing\n- **Compliance Requirements**: SASRA regulations, cooperative governance\n- **Transaction Limits**: Based on membership tier\n- **Custom Features**: Member portal integration, cooperative-specific workflows\n\n#### **3. Microfinance Institutions (MFIs)**\n- Small-scale lending institutions\n- **Special Features**: Group lending, micro-insurance, agricultural finance\n- **Compliance Requirements**: Microfinance-specific CBK regulations\n- **Transaction Limits**: Volume-based limits\n- **Custom Features**: Mobile money integration, rural payment solutions\n\n#### **4. Fintech Companies**\n- Digital financial service providers\n- **Special Features**: API-first architecture, rapid deployment, custom integrations\n- **Compliance Requirements**: Sandbox regulations, digital lending guidelines\n- **Transaction Limits**: Tiered based on license type\n- **Custom Features**: Developer-friendly tools, webhook management\n\n#### **5. Payment Processors**\n- Third-party payment service providers\n- **Special Features**: Multi-merchant management, settlement automation\n- **Compliance Requirements**: PCI DSS, payment service provider regulations\n- **Transaction Limits**: Based on processing volume\n- **Custom Features**: Merchant onboarding tools, aggregated reporting\n\n#### **6. Remittance Services**\n- International money transfer operators\n- **Special Features**: Cross-border payments, currency exchange, correspondent networks\n- **Compliance Requirements**: Anti-money laundering, international transfer regulations\n- **Transaction Limits**: Regulatory compliance limits\n- **Custom Features**: Exchange rate management, international settlement\n\n---\n\n## 🔐 **Authentication & Access Control**\n\n### **Multi-Level Authentication System**\n\n#### **Institution-Level Authentication**\n```typescript\ninterface InstitutionAuth {\n  institutionId: string;\n  institutionType: InstitutionType;\n  licenseNumber: string;\n  regulatoryStatus: 'active' | 'suspended' | 'under_review';\n  accessLevel: 'basic' | 'standard' | 'premium' | 'enterprise';\n  mfaRequired: boolean;\n  ipWhitelisting: string[];\n  apiKeys: {\n    production: string;\n    sandbox: string;\n  };\n}\n```\n\n#### **User Role Hierarchy**\n1. **Institution Administrator**\n   - Full system access\n   - User management\n   - Configuration changes\n   - Compliance oversight\n\n2. **Compliance Officer**\n   - Regulatory reporting\n   - Risk management\n   - Audit trail access\n   - Policy enforcement\n\n3. **Operations Manager**\n   - Transaction monitoring\n   - Customer management\n   - Operational reports\n   - System health monitoring\n\n4. **Financial Controller**\n   - Settlement management\n   - Financial reporting\n   - Reconciliation\n   - Fee management\n\n5. **Customer Support**\n   - Customer inquiries\n   - Transaction support\n   - Basic reporting\n   - Issue escalation\n\n6. **Developer/Technical**\n   - API management\n   - Integration monitoring\n   - Technical documentation\n   - System logs\n\n---\n\n## 🏗️ **Dashboard Structure**\n\n### **Main Navigation Architecture**\n\n```\n┌─ 📊 Executive Dashboard\n├─ 💳 Transaction Management\n│  ├─ Real-time Monitoring\n│  ├─ Transaction History\n│  ├─ Settlement Reports\n│  ├─ Reconciliation\n│  └─ Exception Handling\n├─ 👥 Customer Management\n│  ├─ Customer Directory\n│  ├─ KYC/Onboarding\n│  ├─ Account Management\n│  ├─ Customer Support\n│  └─ Bulk Operations\n├─ 🏢 Institution Management\n│  ├─ Institution Profile\n│  ├─ Branch Management\n│  ├─ Staff Management\n│  ├─ Role & Permissions\n│  └─ Institution Settings\n├─ 🛡️ Compliance & Risk\n│  ├─ Regulatory Dashboard\n│  ├─ AML/CFT Tools\n│  ├─ Fraud Detection\n│  ├─ Risk Assessment\n│  ├─ Audit Management\n│  └─ Regulatory Reporting\n├─ 📈 Analytics & Reports\n│  ├─ Business Intelligence\n│  ├─ Transaction Analytics\n│  ├─ Customer Analytics\n│  ├─ Financial Reports\n│  ├─ Custom Reports\n│  └─ Data Export\n├─ 🎨 White-label Solutions\n│  ├─ Branding & Design\n│  ├─ Mobile App Builder\n│  ├─ Web Portal Builder\n│  ├─ Payment Gateway\n│  └─ API Configuration\n├─ 🔌 Integrations\n│  ├─ Core Banking System\n│  ├─ Third-party APIs\n│  ├─ Mobile Money\n│  ├─ Payment Processors\n│  └─ Government Systems\n├─ ⚙️ Settings & Configuration\n│  ├─ Institution Settings\n│  ├─ Payment Configuration\n│  ├─ Security Settings\n│  ├─ Notification Settings\n│  └─ System Preferences\n└─ 🆘 Support & Help\n   ├─ Help Center\n   ├─ Technical Support\n   ├─ Training Resources\n   ├─ System Status\n   └─ Contact Support\n```\n\n---\n\n## 📄 **Core Pages & Sections**\n\n### **1. Executive Dashboard (`/dashboard`)**\n\n#### **Design Philosophy**\n- **Clean, executive-friendly interface**\n- **High-level KPIs with drill-down capability**\n- **Real-time data visualization**\n- **Mobile-responsive design**\n\n#### **Key Performance Indicators Section**\n```typescript\ninterface DashboardKPIs {\n  transactionVolume: {\n    today: number;\n    thisWeek: number;\n    thisMonth: number;\n    growth: number;\n  };\n  revenueMetrics: {\n    feeIncome: number;\n    processingFees: number;\n    subscriptionRevenue: number;\n    totalRevenue: number;\n  };\n  customerMetrics: {\n    totalCustomers: number;\n    activeCustomers: number;\n    newCustomers: number;\n    customerGrowthRate: number;\n  };\n  systemHealth: {\n    uptime: number;\n    responseTime: number;\n    errorRate: number;\n    systemLoad: number;\n  };\n}\n```\n\n#### **Visual Components**\n- **Transaction Volume Chart** (Line chart with time series)\n- **Revenue Breakdown** (Donut chart with categories)\n- **Customer Growth** (Bar chart with monthly progression)\n- **Geographic Distribution** (Interactive map)\n- **System Health Indicators** (Real-time status badges)\n- **Recent Alerts** (Priority-sorted notification feed)\n\n#### **Quick Actions Panel**\n- Generate Daily Report\n- View Settlement Status\n- Customer Support Queue\n- System Configuration\n- Emergency Procedures\n\n---\n\n### **2. Transaction Management (`/transactions`)**\n\n#### **2.1 Real-time Monitoring (`/transactions/live`)**\n\n##### **Design Approach**\n- **Live transaction feed with auto-refresh**\n- **Color-coded status indicators**\n- **Advanced filtering and search**\n- **Transaction drill-down modals**\n\n##### **Core Components**\n```typescript\ninterface LiveTransaction {\n  id: string;\n  timestamp: Date;\n  amount: number;\n  currency: string;\n  status: 'pending' | 'processing' | 'completed' | 'failed' | 'cancelled';\n  customerInfo: {\n    id: string;\n    name: string;\n    accountNumber: string;\n  };\n  paymentMethod: 'card' | 'mobile_money' | 'bank_transfer' | 'crypto';\n  merchantInfo?: {\n    businessName: string;\n    category: string;\n  };\n  riskScore: number;\n  complianceFlags: string[];\n}\n```\n\n##### **Features**\n- **Real-time Transaction Stream** (WebSocket-powered)\n- **Advanced Filters** (Amount range, payment method, status, time)\n- **Search Functionality** (Customer name, transaction ID, reference)\n- **Export Options** (CSV, PDF, Excel)\n- **Risk Indicators** (Color-coded risk levels)\n- **Quick Actions** (Approve, decline, investigate)\n\n#### **2.2 Transaction History (`/transactions/history`)**\n\n##### **Data Visualization**\n- **Paginated Transaction Table** (100 records per page)\n- **Advanced Search** (Multiple criteria)\n- **Date Range Picker** (Presets + custom range)\n- **Status Filtering** (Multi-select dropdown)\n- **Amount Range Slider**\n- **Customer Lookup** (Autocomplete search)\n\n##### **Transaction Details Modal**\n```typescript\ninterface TransactionDetails {\n  basicInfo: TransactionBasicInfo;\n  customerDetails: CustomerInfo;\n  paymentDetails: PaymentMethodDetails;\n  auditTrail: AuditEvent[];\n  complianceChecks: ComplianceCheck[];\n  relatedTransactions: Transaction[];\n  documentAttachments: Document[];\n}\n```\n\n#### **2.3 Settlement Reports (`/transactions/settlements`)**\n\n##### **Settlement Dashboard**\n- **Daily Settlement Summary**\n- **Pending Settlements Queue**\n- **Settlement History**\n- **Reconciliation Status**\n- **Failed Settlement Alerts**\n\n##### **Automated Settlement Features**\n- **Scheduled Settlement Rules**\n- **Threshold-based Settlements**\n- **Multi-currency Settlement**\n- **Settlement Approval Workflows**\n\n---\n\n### **3. Customer Management (`/customers`)**\n\n#### **3.1 Customer Directory (`/customers/directory`)**\n\n##### **Customer List Interface**\n```typescript\ninterface CustomerSummary {\n  id: string;\n  fullName: string;\n  accountNumber: string;\n  customerType: 'individual' | 'business' | 'institution';\n  status: 'active' | 'inactive' | 'suspended' | 'closed';\n  kycStatus: 'pending' | 'verified' | 'rejected' | 'expired';\n  registrationDate: Date;\n  lastActivity: Date;\n  totalTransactions: number;\n  totalVolume: number;\n  riskLevel: 'low' | 'medium' | 'high';\n}\n```\n\n##### **Search & Filter Options**\n- **Quick Search** (Name, account number, phone, email)\n- **Advanced Filters** (KYC status, customer type, risk level)\n- **Bulk Operations** (Export, status updates, notifications)\n- **Customer Segmentation** (High-value, frequent users, new customers)\n\n#### **3.2 KYC/Onboarding (`/customers/kyc`)**\n\n##### **KYC Workflow Management**\n- **Document Upload Interface**\n- **Identity Verification Process**\n- **Biometric Verification** (Where applicable)\n- **Risk Assessment Tools**\n- **Approval/Rejection Workflow**\n- **Compliance Documentation**\n\n##### **Onboarding Pipeline**\n```typescript\ninterface OnboardingStage {\n  stageId: string;\n  stageName: string;\n  status: 'pending' | 'in_progress' | 'completed' | 'failed';\n  requiredDocuments: Document[];\n  verificationChecks: VerificationCheck[];\n  estimatedTime: number; // minutes\n  nextSteps: string[];\n}\n```\n\n---\n\n### **4. Compliance & Risk (`/compliance`)**\n\n#### **4.1 Regulatory Dashboard (`/compliance/regulatory`)**\n\n##### **CBK Compliance Section**\n- **Real-time Compliance Status**\n- **Regulatory Reporting Queue**\n- **CBK Return Submissions**\n- **Licensing Status Monitor**\n- **Regulatory Correspondence**\n\n##### **KRA Integration**\n- **eTIMS Integration Status**\n- **iTax Reporting Dashboard**\n- **VAT Automation**\n- **Withholding Tax Management**\n- **Tax Receipt Generation**\n\n#### **4.2 AML/CFT Tools (`/compliance/aml`)**\n\n##### **Transaction Monitoring**\n```typescript\ninterface AMLAlert {\n  alertId: string;\n  transactionId: string;\n  alertType: 'suspicious_pattern' | 'threshold_breach' | 'blacklist_match' | 'unusual_activity';\n  riskScore: number;\n  generatedAt: Date;\n  status: 'open' | 'investigating' | 'closed' | 'escalated';\n  assignedTo: string;\n  description: string;\n  actionsTaken: AMLAction[];\n}\n```\n\n##### **Watchlist Management**\n- **PEP (Politically Exposed Persons) Screening**\n- **Sanctions List Checking**\n- **Internal Blacklist Management**\n- **Customer Risk Profiling**\n- **Enhanced Due Diligence**\n\n#### **4.3 Fraud Detection (`/compliance/fraud`)**\n\n##### **AI-Powered Fraud Detection**\n- **Real-time Risk Scoring**\n- **Behavioral Analysis**\n- **Pattern Recognition**\n- **Machine Learning Models**\n- **False Positive Management**\n\n##### **Fraud Investigation Tools**\n- **Investigation Workflow**\n- **Evidence Collection**\n- **Case Management**\n- **Reporting Tools**\n- **Law Enforcement Interface**\n\n---\n\n### **5. Analytics & Reports (`/analytics`)**\n\n#### **5.1 Business Intelligence (`/analytics/bi`)**\n\n##### **Interactive Dashboards**\n- **Revenue Analytics** (Drill-down capabilities)\n- **Customer Behavior Analysis** (Cohort analysis, retention)\n- **Transaction Pattern Analysis** (Heatmaps, time series)\n- **Market Share Analysis** (Competitive positioning)\n- **Profitability Analysis** (Customer segments, products)\n\n##### **Predictive Analytics**\n```typescript\ninterface PredictiveMetrics {\n  customerChurnPrediction: {\n    riskScore: number;\n    timeframe: string;\n    recommendedActions: string[];\n  };\n  transactionForecast: {\n    predictedVolume: number;\n    confidenceInterval: number;\n    seasonalFactors: number[];\n  };\n  revenueProjection: {\n    projectedRevenue: number;\n    growthRate: number;\n    riskFactors: string[];\n  };\n}\n```\n\n#### **5.2 Financial Reports (`/analytics/financial`)**\n\n##### **Standard Financial Reports**\n- **Profit & Loss Statement**\n- **Balance Sheet** (Asset/liability tracking)\n- **Cash Flow Statement**\n- **Fee Income Analysis**\n- **Cost Center Reports**\n\n##### **Regulatory Financial Reports**\n- **CBK Prudential Returns**\n- **Capital Adequacy Reports**\n- **Liquidity Risk Reports**\n- **Credit Risk Reports**\n- **Operational Risk Reports**\n\n---\n\n### **6. White-label Solutions (`/white-label`)**\n\n#### **6.1 Branding & Design (`/white-label/branding`)**\n\n##### **Brand Customization Interface**\n```typescript\ninterface BrandingConfiguration {\n  institutionBranding: {\n    logo: string; // URL to logo\n    primaryColor: string;\n    secondaryColor: string;\n    fontFamily: string;\n    brandGuidelines: Document;\n  };\n  uiCustomization: {\n    headerLayout: 'default' | 'minimal' | 'extended';\n    navigationStyle: 'sidebar' | 'top_nav' | 'hybrid';\n    colorScheme: 'light' | 'dark' | 'auto';\n    customCSS: string;\n  };\n  contentCustomization: {\n    welcomeMessage: string;\n    termsAndConditions: string;\n    privacyPolicy: string;\n    supportInformation: string;\n  };\n}\n```\n\n##### **Design Tools**\n- **Visual Brand Builder** (Drag & drop interface)\n- **Color Palette Generator**\n- **Logo Upload & Positioning**\n- **Preview Mode** (Desktop, tablet, mobile)\n- **Brand Guidelines Generator**\n\n#### **6.2 Mobile App Builder (`/white-label/mobile`)**\n\n##### **App Configuration**\n- **Feature Selection** (Payment types, services)\n- **User Interface Design**\n- **Push Notification Setup**\n- **Security Configuration**\n- **App Store Preparation**\n\n##### **App Management**\n- **Version Control**\n- **Update Distribution**\n- **User Analytics**\n- **Crash Reporting**\n- **Performance Monitoring**\n\n---\n\n### **7. Integrations (`/integrations`)**\n\n#### **7.1 Core Banking System (`/integrations/core-banking`)**\n\n##### **Integration Management**\n```typescript\ninterface CoreBankingIntegration {\n  systemType: 'temenos' | 'flexcube' | 'finacle' | 'custom';\n  connectionStatus: 'connected' | 'disconnected' | 'error';\n  lastSync: Date;\n  syncFrequency: number; // minutes\n  dataMapping: {\n    customerFields: FieldMapping[];\n    accountFields: FieldMapping[];\n    transactionFields: FieldMapping[];\n  };\n  apiConfiguration: {\n    baseUrl: string;\n    authentication: AuthConfig;\n    endpoints: EndpointConfig[];\n  };\n}\n```\n\n##### **Data Synchronization**\n- **Real-time Sync Monitor**\n- **Batch Processing Status**\n- **Error Log Management**\n- **Data Validation Rules**\n- **Conflict Resolution**\n\n#### **7.2 Mobile Money Integration (`/integrations/mobile-money`)**\n\n##### **Mobile Money Providers**\n- **M-Pesa Integration** (Safaricom)\n- **Airtel Money** (Airtel Kenya)\n- **T-Kash** (Telkom Kenya)\n- **Equitel** (Equity Bank)\n\n##### **Integration Features**\n- **STK Push Implementation**\n- **C2B Collections**\n- **B2C Disbursements**\n- **Balance Inquiries**\n- **Transaction Status Tracking**\n\n---\n\n## 🎨 **Design Guidelines**\n\n### **Design Principles**\n\n#### **1. Institution-First Design**\n- **Professional Aesthetics**: Clean, corporate-friendly interface\n- **Trust Indicators**: Security badges, compliance certifications\n- **Efficiency Focus**: Minimize clicks, optimize workflows\n- **Scalability**: Support from small SACCOs to major banks\n\n#### **2. Color Palette**\n```css\n:root {\n  /* Primary Colors */\n  --sunny-green-primary: #16a34a;\n  --sunny-green-light: #22c55e;\n  --sunny-green-dark: #15803d;\n  \n  /* Institution Colors */\n  --institution-blue: #1e40af;\n  --institution-navy: #1e293b;\n  --institution-gray: #64748b;\n  \n  /* Status Colors */\n  --status-success: #10b981;\n  --status-warning: #f59e0b;\n  --status-error: #ef4444;\n  --status-info: #3b82f6;\n  \n  /* Neutral Palette */\n  --gray-50: #f8fafc;\n  --gray-100: #f1f5f9;\n  --gray-200: #e2e8f0;\n  --gray-800: #1e293b;\n  --gray-900: #0f172a;\n}\n```\n\n#### **3. Typography**\n```css\n/* Primary Font Stack */\nfont-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n\n/* Heading Hierarchy */\nh1 { font-size: 2.5rem; font-weight: 700; line-height: 1.2; }\nh2 { font-size: 2rem; font-weight: 600; line-height: 1.3; }\nh3 { font-size: 1.5rem; font-weight: 600; line-height: 1.4; }\nh4 { font-size: 1.25rem; font-weight: 500; line-height: 1.5; }\n\n/* Body Text */\nbody { font-size: 0.875rem; font-weight: 400; line-height: 1.6; }\n.text-small { font-size: 0.75rem; line-height: 1.5; }\n```\n\n#### **4. Spacing System**\n```css\n/* Spacing Scale (Tailwind-based) */\n--space-1: 0.25rem;   /* 4px */\n--space-2: 0.5rem;    /* 8px */\n--space-3: 0.75rem;   /* 12px */\n--space-4: 1rem;      /* 16px */\n--space-6: 1.5rem;    /* 24px */\n--space-8: 2rem;      /* 32px */\n--space-12: 3rem;     /* 48px */\n--space-16: 4rem;     /* 64px */\n```\n\n#### **5. Component Patterns**\n\n##### **Dashboard Cards**\n```tsx\ninterface DashboardCard {\n  title: string;\n  value: string | number;\n  trend?: {\n    direction: 'up' | 'down' | 'neutral';\n    percentage: number;\n    period: string;\n  };\n  icon?: React.ComponentType;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n}\n```\n\n##### **Data Tables**\n- **Sortable Headers** (Click to sort)\n- **Filterable Columns** (Dropdown filters)\n- **Pagination** (Show 25/50/100 per page)\n- **Row Actions** (View, edit, delete)\n- **Bulk Operations** (Multi-select)\n- **Export Functionality** (CSV, PDF, Excel)\n\n##### **Forms & Inputs**\n- **Consistent Field Spacing** (24px vertical gaps)\n- **Clear Label Hierarchy** (Bold labels, helper text)\n- **Validation States** (Success, error, warning indicators)\n- **Progress Indicators** (Multi-step forms)\n- **Auto-save Functionality** (Draft preservation)\n\n---\n\n## 🔧 **Components Library**\n\n### **Shared Components Structure**\n\n```\n@sunny/ui/institution/\n├── 📊 Charts & Visualizations\n│   ├── TransactionVolumeChart.tsx\n│   ├── RevenueBreakdownChart.tsx\n│   ├── CustomerGrowthChart.tsx\n│   ├── RiskHeatmap.tsx\n│   └── ComplianceGauge.tsx\n├── 📋 Data Display\n│   ├── TransactionTable.tsx\n│   ├── CustomerTable.tsx\n│   ├── AuditLogTable.tsx\n│   ├── SettlementTable.tsx\n│   └── ComplianceReportTable.tsx\n├── 📝 Forms & Inputs\n│   ├── InstitutionProfileForm.tsx\n│   ├── KYCDocumentUpload.tsx\n│   ├── ComplianceForm.tsx\n│   ├── RiskAssessmentForm.tsx\n│   └── SettlementConfigForm.tsx\n├── 🔔 Notifications & Alerts\n│   ├── ComplianceAlert.tsx\n│   ├── FraudAlert.tsx\n│   ├── SystemAlert.tsx\n│   └── RegulatoryNotification.tsx\n├── 📈 Dashboard Widgets\n│   ├── KPICard.tsx\n│   ├── MetricCard.tsx\n│   ├── StatusCard.tsx\n│   ├── ProgressCard.tsx\n│   └── AlertCard.tsx\n├── 🏦 Institution-Specific\n│   ├── BranchSelector.tsx\n│   ├── StaffManagement.tsx\n│   ├── LicenseStatus.tsx\n│   ├── RegulatoryBadge.tsx\n│   └── InstitutionHeader.tsx\n└── 🛡️ Security & Compliance\n    ├── SecurityBadge.tsx\n    ├── ComplianceIndicator.tsx\n    ├── RiskScoreDisplay.tsx\n    ├── AuditTrail.tsx\n    └── EncryptionStatus.tsx\n```\n\n### **Component Design Specifications**\n\n#### **KPI Card Component**\n```tsx\ninterface KPICardProps {\n  title: string;\n  value: string | number;\n  unit?: string;\n  trend?: {\n    direction: 'up' | 'down' | 'neutral';\n    percentage: number;\n    period: string;\n  };\n  icon?: React.ComponentType<{ className?: string }>;\n  color?: 'green' | 'blue' | 'yellow' | 'red' | 'gray';\n  size?: 'sm' | 'md' | 'lg';\n  onClick?: () => void;\n  loading?: boolean;\n}\n\n// Usage Example\n<KPICard\n  title=\"Total Transactions\"\n  value={1234567}\n  unit=\"KES\"\n  trend={{\n    direction: 'up',\n    percentage: 12.5,\n    period: 'vs last month'\n  }}\n  icon={CurrencyDollarIcon}\n  color=\"green\"\n  size=\"lg\"\n  onClick={() => navigateToTransactions()}\n/>\n```\n\n#### **Transaction Table Component**\n```tsx\ninterface TransactionTableProps {\n  transactions: Transaction[];\n  loading?: boolean;\n  pagination?: {\n    currentPage: number;\n    totalPages: number;\n    pageSize: number;\n    onPageChange: (page: number) => void;\n  };\n  sorting?: {\n    column: string;\n    direction: 'asc' | 'desc';\n    onSort: (column: string) => void;\n  };\n  filters?: {\n    status?: TransactionStatus[];\n    dateRange?: [Date, Date];\n    amountRange?: [number, number];\n  };\n  actions?: {\n    onView: (transaction: Transaction) => void;\n    onApprove?: (transaction: Transaction) => void;\n    onDecline?: (transaction: Transaction) => void;\n  };\n  selectable?: boolean;\n  onSelectionChange?: (selectedIds: string[]) => void;\n}\n```\n\n---\n\n## 💾 **Data Models**\n\n### **Core Institution Models**\n\n#### **Institution Profile**\n```typescript\ninterface Institution {\n  id: string;\n  name: string;\n  type: InstitutionType;\n  registrationNumber: string;\n  licenseNumber: string;\n  regulatoryStatus: 'active' | 'suspended' | 'under_review' | 'revoked';\n  \n  contactInfo: {\n    address: Address;\n    phone: string;\n    email: string;\n    website?: string;\n  };\n  \n  legalInfo: {\n    incorporationDate: Date;\n    registrationCountry: string;\n    taxIdentificationNumber: string;\n    regulatoryLicenses: License[];\n  };\n  \n  operationalInfo: {\n    operatingHours: OperatingHours;\n    supportedCurrencies: string[];\n    supportedLanguages: string[];\n    timeZone: string;\n  };\n  \n  complianceInfo: {\n    kycRequirements: KYCRequirement[];\n    amlPolicies: AMLPolicy[];\n    riskAppetite: 'low' | 'medium' | 'high';\n    regulatoryReporting: ReportingRequirement[];\n  };\n  \n  technicalInfo: {\n    apiKeys: APIKey[];\n    webhookUrls: string[];\n    ipWhitelist: string[];\n    encryptionKeys: EncryptionKey[];\n  };\n  \n  billingInfo: {\n    plan: 'basic' | 'standard' | 'premium' | 'enterprise';\n    pricing: PricingStructure;\n    paymentMethod: PaymentMethod;\n    billingCycle: 'monthly' | 'quarterly' | 'annually';\n  };\n  \n  settings: {\n    branding: BrandingConfiguration;\n    notifications: NotificationSettings;\n    security: SecuritySettings;\n    features: FeatureToggle[];\n  };\n  \n  metadata: {\n    createdAt: Date;\n    updatedAt: Date;\n    createdBy: string;\n    lastModifiedBy: string;\n    version: number;\n  };\n}\n```\n\n#### **Transaction Model**\n```typescript\ninterface InstitutionTransaction {\n  id: string;\n  institutionId: string;\n  reference: string;\n  externalReference?: string;\n  \n  transactionInfo: {\n    amount: number;\n    currency: string;\n    description: string;\n    category: TransactionCategory;\n    type: 'credit' | 'debit' | 'transfer';\n  };\n  \n  parties: {\n    sender: TransactionParty;\n    receiver: TransactionParty;\n    institution: {\n      id: string;\n      name: string;\n      role: 'initiating' | 'receiving' | 'intermediary';\n    };\n  };\n  \n  paymentMethod: {\n    type: PaymentMethodType;\n    details: PaymentMethodDetails;\n    provider?: string;\n  };\n  \n  status: {\n    current: TransactionStatus;\n    history: StatusHistory[];\n    lastUpdated: Date;\n  };\n  \n  compliance: {\n    kycChecks: KYCCheck[];\n    amlChecks: AMLCheck[];\n    riskScore: number;\n    complianceFlags: ComplianceFlag[];\n  };\n  \n  financial: {\n    fees: Fee[];\n    taxes: Tax[];\n    exchangeRate?: ExchangeRate;\n    settlement: SettlementInfo;\n  };\n  \n  auditTrail: {\n    events: AuditEvent[];\n    approvals: ApprovalEvent[];\n    modifications: ModificationEvent[];\n  };\n  \n  metadata: {\n    createdAt: Date;\n    processedAt?: Date;\n    settledAt?: Date;\n    channel: 'web' | 'mobile' | 'api' | 'batch';\n    ipAddress?: string;\n    userAgent?: string;\n    location?: GeoLocation;\n  };\n}\n```\n\n#### **Customer Model (Institution Perspective)**\n```typescript\ninterface InstitutionCustomer {\n  id: string;\n  institutionId: string;\n  accountNumber: string;\n  customerType: 'individual' | 'business' | 'corporate';\n  \n  personalInfo: {\n    title?: string;\n    firstName: string;\n    middleName?: string;\n    lastName: string;\n    dateOfBirth?: Date;\n    nationality: string;\n    gender?: 'male' | 'female' | 'other';\n  };\n  \n  contactInfo: {\n    email: string;\n    phone: string;\n    alternativePhone?: string;\n    address: Address;\n    preferredLanguage: string;\n  };\n  \n  identification: {\n    primaryId: IdentificationDocument;\n    secondaryId?: IdentificationDocument;\n    biometricData?: BiometricData;\n  };\n  \n  kycInfo: {\n    status: KYCStatus;\n    level: 'basic' | 'intermediate' | 'enhanced';\n    documents: KYCDocument[];\n    verificationDate?: Date;\n    expiryDate?: Date;\n    verifiedBy?: string;\n  };\n  \n  riskProfile: {\n    level: 'low' | 'medium' | 'high';\n    score: number;\n    factors: RiskFactor[];\n    lastAssessment: Date;\n    nextReview: Date;\n  };\n  \n  accountInfo: {\n    status: 'active' | 'inactive' | 'suspended' | 'closed';\n    openingDate: Date;\n    closingDate?: Date;\n    accountOfficer?: string;\n    branch?: string;\n  };\n  \n  transactionProfile: {\n    totalTransactions: number;\n    totalVolume: number;\n    averageTransactionAmount: number;\n    lastTransactionDate?: Date;\n    monthlyVolume: number;\n    yearlyVolume: number;\n  };\n  \n  preferences: {\n    notifications: NotificationPreference[];\n    language: string;\n    timezone: string;\n    communicationChannels: string[];\n  };\n  \n  metadata: {\n    createdAt: Date;\n    updatedAt: Date;\n    lastLogin?: Date;\n    registrationChannel: string;\n    referralSource?: string;\n  };\n}\n```\n\n---\n\n## 🔌 **API Integration**\n\n### **Institution API Endpoints**\n\n#### **Authentication Endpoints**\n```typescript\n// Institution Authentication\nPOST /api/v2/institutions/auth/signin\nPOST /api/v2/institutions/auth/refresh\nPOST /api/v2/institutions/auth/signout\nPOST /api/v2/institutions/auth/mfa/verify\n\n// API Key Management\nGET /api/v2/institutions/api-keys\nPOST /api/v2/institutions/api-keys\nPUT /api/v2/institutions/api-keys/{keyId}\nDELETE /api/v2/institutions/api-keys/{keyId}\n```\n\n#### **Institution Management**\n```typescript\n// Institution Profile\nGET /api/v2/institutions/profile\nPUT /api/v2/institutions/profile\nPATCH /api/v2/institutions/settings\n\n// Branch Management\nGET /api/v2/institutions/branches\nPOST /api/v2/institutions/branches\nPUT /api/v2/institutions/branches/{branchId}\nDELETE /api/v2/institutions/branches/{branchId}\n\n// Staff Management\nGET /api/v2/institutions/staff\nPOST /api/v2/institutions/staff\nPUT /api/v2/institutions/staff/{staffId}\nDELETE /api/v2/institutions/staff/{staffId}\n```\n\n#### **Transaction Management**\n```typescript\n// Transaction Monitoring\nGET /api/v2/institutions/transactions\nGET /api/v2/institutions/transactions/{id}\nGET /api/v2/institutions/transactions/live-feed\n\n// Transaction Operations\nPOST /api/v2/institutions/transactions/approve/{id}\nPOST /api/v2/institutions/transactions/decline/{id}\nPOST /api/v2/institutions/transactions/investigate/{id}\n\n// Settlement Management\nGET /api/v2/institutions/settlements\nPOST /api/v2/institutions/settlements/trigger\nGET /api/v2/institutions/settlements/reconciliation\n```\n\n#### **Customer Management**\n```typescript\n// Customer Operations\nGET /api/v2/institutions/customers\nGET /api/v2/institutions/customers/{id}\nPOST /api/v2/institutions/customers\nPUT /api/v2/institutions/customers/{id}\n\n// KYC Management\nGET /api/v2/institutions/customers/{id}/kyc\nPOST /api/v2/institutions/customers/{id}/kyc/documents\nPUT /api/v2/institutions/customers/{id}/kyc/status\n\n// Customer Analytics\nGET /api/v2/institutions/customers/analytics\nGET /api/v2/institutions/customers/{id}/transaction-history\n```\n\n#### **Compliance & Reporting**\n```typescript\n// Compliance Monitoring\nGET /api/v2/institutions/compliance/status\nGET /api/v2/institutions/compliance/alerts\nPOST /api/v2/institutions/compliance/alerts/{id}/acknowledge\n\n// Regulatory Reporting\nGET /api/v2/institutions/reports/regulatory\nPOST /api/v2/institutions/reports/cbk/submit\nGET /api/v2/institutions/reports/kra/status\n\n// AML/CFT\nGET /api/v2/institutions/aml/alerts\nPOST /api/v2/institutions/aml/investigate\nGET /api/v2/institutions/aml/watchlist\n```\n\n### **Real-time Features**\n\n#### **WebSocket Connections**\n```typescript\n// Live Transaction Feed\nws://institutions.sunnypayments.com/v2/transactions/live\n\n// System Alerts\nws://institutions.sunnypayments.com/v2/alerts/system\n\n// Compliance Notifications\nws://institutions.sunnypayments.com/v2/compliance/notifications\n\n// Settlement Updates\nws://institutions.sunnypayments.com/v2/settlements/updates\n```\n\n#### **Webhook Configuration**\n```typescript\ninterface WebhookConfiguration {\n  events: {\n    'transaction.completed': boolean;\n    'transaction.failed': boolean;\n    'settlement.processed': boolean;\n    'compliance.alert': boolean;\n    'customer.kyc.updated': boolean;\n    'fraud.detected': boolean;\n  };\n  endpoints: {\n    url: string;\n    method: 'POST' | 'PUT';\n    headers: Record<string, string>;\n    authentication: {\n      type: 'api_key' | 'oauth' | 'basic';\n      credentials: Record<string, string>;\n    };\n  }[];\n  retry: {\n    attempts: number;\n    backoff: 'linear' | 'exponential';\n    timeout: number;\n  };\n}\n```\n\n---\n\n## 🛡️ **Security Considerations**\n\n### **Access Control Matrix**\n\n| Role | Dashboard | Transactions | Customers | Compliance | Analytics | Settings | Integrations |\n|------|-----------|--------------|-----------|------------|-----------|----------|--------------|\n| **Institution Admin** | Full | Full | Full | Full | Full | Full | Full |\n| **Compliance Officer** | View | View | View | Full | View | Limited | View |\n| **Operations Manager** | View | Full | Full | View | View | Limited | View |\n| **Financial Controller** | View | View | Limited | Limited | Full | Limited | Limited |\n| **Customer Support** | View | Limited | Limited | View | Limited | None | None |\n| **Developer** | View | View | View | View | View | API Only | Full |\n\n### **Data Protection**\n\n#### **Encryption Standards**\n- **Data at Rest**: AES-256 encryption\n- **Data in Transit**: TLS 1.3\n- **Database**: Transparent Data Encryption (TDE)\n- **Backups**: Encrypted with separate key management\n\n#### **PII Protection**\n```typescript\ninterface PIIProtection {\n  classification: 'public' | 'internal' | 'confidential' | 'restricted';\n  encryption: {\n    method: 'AES-256' | 'RSA-2048';\n    keyRotation: number; // days\n  };\n  access: {\n    logAllAccess: boolean;\n    requireJustification: boolean;\n    approvalRequired: boolean;\n  };\n  retention: {\n    period: number; // months\n    autoDelete: boolean;\n    archival: boolean;\n  };\n}\n```\n\n#### **Audit Requirements**\n- **Complete Audit Trail**: All user actions logged\n- **Immutable Logs**: Tamper-proof audit logging\n- **Real-time Monitoring**: Suspicious activity detection\n- **Compliance Reporting**: Automated audit report generation\n\n### **Regulatory Compliance**\n\n#### **Kenya Regulatory Requirements**\n- **CBK Prudential Guidelines**: Capital adequacy, liquidity ratios\n- **Data Protection Act**: Personal data handling\n- **Banking Act**: Operational requirements\n- **AML/CFT Regulations**: Anti-money laundering\n- **Consumer Protection**: Fair treatment of customers\n\n#### **International Standards**\n- **PCI DSS Level 1**: Payment card industry compliance\n- **ISO 27001**: Information security management\n- **SOC 2 Type II**: Service organization controls\n- **GDPR**: European data protection (if applicable)\n\n---\n\n## 📱 **Responsive Design**\n\n### **Breakpoint Strategy**\n```css\n/* Mobile First Approach */\n@media (min-width: 640px) { /* sm */ }\n@media (min-width: 768px) { /* md */ }\n@media (min-width: 1024px) { /* lg */ }\n@media (min-width: 1280px) { /* xl */ }\n@media (min-width: 1536px) { /* 2xl */ }\n```\n\n### **Mobile Optimizations**\n- **Touch-Friendly Interface**: Minimum 44px touch targets\n- **Simplified Navigation**: Collapsible sidebar, bottom navigation\n- **Progressive Disclosure**: Show essential information first\n- **Offline Capability**: Cache critical data locally\n- **Performance**: Lazy loading, image optimization\n\n---\n\n## 🚀 **Performance Optimization**\n\n### **Loading Strategies**\n- **Code Splitting**: Route-based and component-based splitting\n- **Lazy Loading**: Images, components, and routes\n- **Prefetching**: Critical resources and likely next pages\n- **Caching**: API responses, static assets, user preferences\n\n### **Real-time Performance**\n- **WebSocket Connection Pooling**: Efficient real-time updates\n- **Debounced Search**: Reduce API calls during typing\n- **Virtual Scrolling**: Handle large datasets efficiently\n- **Optimistic Updates**: Immediate UI feedback\n\n---\n\nThis comprehensive architecture guide serves as the foundation for building a world-class institutional dashboard that meets the unique needs of African financial institutions while maintaining global standards for security, compliance, and user experience."}
<result>Successfully wrote to Sunny/INSTITUTIONAL_DASHBOARD_ARCHITECTURE.md.

When you're done with your current set of changes to this file, you should call the read_lints tool with the specific file path and fix any newly introduced errors.</result>
